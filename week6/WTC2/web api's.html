<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web API's</title>
</head>
<body>
    <h1>Web API's</h1>
    <h2>Web history API</h2>
    <button onclick="back()">Go back</button>
    <button onclick="go()">Go back 2 pages</button>
    <button onclick="forward()">Go forward</button>
    <h2>Web storage</h2>
    <button onclick="setItem()">Set Item</button>
    <button onclick="getItem()">Get Item</button>
    <button onclick="removeItem()">Remove Item</button>
    <h2>Fetch API</h2>
    <button onclick="fetchUsers()">fetch users</button>
    <h2>Web Notification API</h2>
    <button onclick="notifyme()">Notify me</button>
    <script>
        // web history API
        function back(){
            history.back();
        }
        function go(){
            history.go(-2);
        }
        function forward(){
            history.forward();
        }
        // web storage API
        function setItem(){
            // local storage
            localStorage.setItem('name', 'Fırat Demir');
            // session storage
            sessionStorage.setItem('name', 'Demir Fırat');
        }
        function getItem(){
            // local storage
            console.log('local', localStorage.getItem('name',));
            // session storage
            console.log('session', sessionStorage.getItem('name'));
        }
        function removeItem(){
            localStorage.removeItem('name');
            sessionStorage.removeItem('name');
        }
        // web fetch API
        function fetchUsers(){
            fetch('https://jsonplaceholder.typicode.com/users').then(function (response){
                return response.json();
            })
            .then(function(users){
                console.log('users', users)
            })
        }
        function sayhi(){
            const notification = new Notification('Merhaba Fırat!');
        }

        function notifyme(){
            if('Notification' in window){
                 if (Notification.permission === 'granted'){
                    sayhi();
                } else if (Notification.permission === 'denied'){ console.log('Bildirim izni verilmedi.');

                }else {
                    Notification.requestPermission().then((permission) => {
                        if (permission === 'granted'){
                           sayhi();
                        }
                    });
                }
            }else {
                console.log('Notification API desteklenmiyor.');
            }
        }
    </script>
</body>
</html>